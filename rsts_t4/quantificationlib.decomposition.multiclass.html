

<!doctype html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>quantificationlib.decomposition.multiclass module &#8212; quantificationlib 0.1.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/bizstyle.css" />
    
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/bizstyle.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="quantificationlib.decomposition.ordinal module" href="quantificationlib.decomposition.ordinal.html" />
    <link rel="prev" title="quantificationlib.decomposition package" href="quantificationlib.decomposition.html" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0" />
    <!--[if lt IE 9]>
    <script src="_static/css3-mediaqueries.js"></script>
    <![endif]-->
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="quantificationlib.decomposition.ordinal.html" title="quantificationlib.decomposition.ordinal module"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="quantificationlib.decomposition.html" title="quantificationlib.decomposition package"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">quantificationlib 0.1.1 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="quantificationlib.decomposition.html" accesskey="U">quantificationlib.decomposition package</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">quantificationlib.decomposition.multiclass module</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="module-quantificationlib.decomposition.multiclass">
<span id="quantificationlib-decomposition-multiclass-module"></span><h1>quantificationlib.decomposition.multiclass module<a class="headerlink" href="#module-quantificationlib.decomposition.multiclass" title="Permalink to this heading">¶</a></h1>
<p>Generic quantifiers based on multiclass decompositions</p>
<dl class="py class">
<dt class="sig sig-object py" id="quantificationlib.decomposition.multiclass.OneVsRestQuantifier">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">OneVsRestQuantifier</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">base_quantifier</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">estimator_train</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">estimator_test</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/quantificationlib/decomposition/multiclass.html#OneVsRestQuantifier"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#quantificationlib.decomposition.multiclass.OneVsRestQuantifier" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="quantificationlib.base.html#quantificationlib.base.UsingClassifiers" title="quantificationlib.base.UsingClassifiers"><code class="xref py py-class docutils literal notranslate"><span class="pre">UsingClassifiers</span></code></a></p>
<p>Implements a One Vs Rest Multiclass Quantifier given any base quantifier</p>
<p>Trains one quantifier per class that predicts the prevalence on such class. The aggregation strategy
just normalizes these prevalences to sum 1</p>
<p>The class works both with quantifiers that require classifiers or not. In the former case, the estimator
used for the training distribution and the testing distribution must be a OneVsRestQuantifier</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>base_quantifier</strong> (<em>quantifier object</em>) – The base quantifier used to build the One versus Rest decomposition. Any quantifier can be used</p></li>
<li><p><strong>estimator_train</strong> (<em>estimator object</em><em>, </em><em>optional</em><em>, </em><em>(</em><em>default=None</em><em>)</em>) – An estimator object implementing <cite>fit</cite> and one of <cite>predict</cite> or <cite>predict_proba</cite>. It is used to classify
the examples of the training set and to obtain their distribution when the base quantifier is an
instance of the class UsingClassifiers. Notice that some quantifiers of this kind, namely CC and PCC,
do not require an estimator for the training distribution</p></li>
<li><p><strong>estimator_test</strong> (<em>estimator object</em><em>, </em><em>optional</em><em>, </em><em>(</em><em>default=None</em><em>)</em>) – An estimator object implementing <cite>fit</cite> and one of <cite>predict</cite> or <cite>predict_proba</cite>. It is used to classify
the examples of the testing bag and to obtain their distribution when the base quantifier is an
instance of the class UsingClassifiers. For some experiments both estimators could be the same</p></li>
<li><p><strong>verbose</strong> (<em>int</em><em>, </em><em>optional</em><em>, </em><em>(</em><em>default=0</em><em>)</em>) – The verbosity level. The default value, zero, means silent mode</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="quantificationlib.decomposition.multiclass.OneVsRestQuantifier.base_quantifier">
<span class="sig-name descname"><span class="pre">base_quantifier</span></span><a class="headerlink" href="#quantificationlib.decomposition.multiclass.OneVsRestQuantifier.base_quantifier" title="Permalink to this definition">¶</a></dt>
<dd><p>The base quantifier used to build the One versus Rest decomposition</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>quantifier object</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="quantificationlib.decomposition.multiclass.OneVsRestQuantifier.estimator_train">
<span class="sig-name descname"><span class="pre">estimator_train</span></span><a class="headerlink" href="#quantificationlib.decomposition.multiclass.OneVsRestQuantifier.estimator_train" title="Permalink to this definition">¶</a></dt>
<dd><p>Estimator used to classify the examples of the training set</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>estimator</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="quantificationlib.decomposition.multiclass.OneVsRestQuantifier.estimator_test">
<span class="sig-name descname"><span class="pre">estimator_test</span></span><a class="headerlink" href="#quantificationlib.decomposition.multiclass.OneVsRestQuantifier.estimator_test" title="Permalink to this definition">¶</a></dt>
<dd><p>Estimator used to classify the examples of the testing bag</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>estimator</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="quantificationlib.decomposition.multiclass.OneVsRestQuantifier.needs_predictions_train">
<span class="sig-name descname"><span class="pre">needs_predictions_train</span></span><a class="headerlink" href="#quantificationlib.decomposition.multiclass.OneVsRestQuantifier.needs_predictions_train" title="Permalink to this definition">¶</a></dt>
<dd><p>True if the base quantifier needs to estimate the training distribution</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>bool, (default=True)</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="quantificationlib.decomposition.multiclass.OneVsRestQuantifier.probabilistic_predictions">
<span class="sig-name descname"><span class="pre">probabilistic_predictions</span></span><a class="headerlink" href="#quantificationlib.decomposition.multiclass.OneVsRestQuantifier.probabilistic_predictions" title="Permalink to this definition">¶</a></dt>
<dd><p>Not used</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="quantificationlib.decomposition.multiclass.OneVsRestQuantifier.predictions_train_">
<span class="sig-name descname"><span class="pre">predictions_train_</span></span><a class="headerlink" href="#quantificationlib.decomposition.multiclass.OneVsRestQuantifier.predictions_train_" title="Permalink to this definition">¶</a></dt>
<dd><p>Predictions of the examples in the training set</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>ndarray, shape (n_examples, n_classes) (probabilistic)</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="quantificationlib.decomposition.multiclass.OneVsRestQuantifier.predictions_test_">
<span class="sig-name descname"><span class="pre">predictions_test_</span></span><a class="headerlink" href="#quantificationlib.decomposition.multiclass.OneVsRestQuantifier.predictions_test_" title="Permalink to this definition">¶</a></dt>
<dd><p>Predictions of the examples in the testing bag</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>ndarray, shape (n_examples, n_classes) (probabilistic)</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="quantificationlib.decomposition.multiclass.OneVsRestQuantifier.quantifiers_">
<span class="sig-name descname"><span class="pre">quantifiers_</span></span><a class="headerlink" href="#quantificationlib.decomposition.multiclass.OneVsRestQuantifier.quantifiers_" title="Permalink to this definition">¶</a></dt>
<dd><p>List of quantifiers, one for each class</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>ndarray, shape (n_classes, )</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="quantificationlib.decomposition.multiclass.OneVsRestQuantifier.classes_">
<span class="sig-name descname"><span class="pre">classes_</span></span><a class="headerlink" href="#quantificationlib.decomposition.multiclass.OneVsRestQuantifier.classes_" title="Permalink to this definition">¶</a></dt>
<dd><p>Class labels</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>ndarray, shape (n_classes, )</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="quantificationlib.decomposition.multiclass.OneVsRestQuantifier.y_ext_">
<span class="sig-name descname"><span class="pre">y_ext_</span></span><a class="headerlink" href="#quantificationlib.decomposition.multiclass.OneVsRestQuantifier.y_ext_" title="Permalink to this definition">¶</a></dt>
<dd><p>Repmat of true labels of the training set. When CV_estimator is used with averaged_predictions=False,
<a href="#id1"><span class="problematic" id="id2">predictions_train_</span></a> will have a larger dimension (factor=n_repetitions * n_folds of the underlying
CV_estimator) than y. In other cases, <a href="#id3"><span class="problematic" id="id4">y_ext_</span></a> == y.
<a href="#id5"><span class="problematic" id="id6">y_ext_</span></a> must be used in <cite>fit</cite>/<cite>predict</cite> methods whenever the true labels of the training set are needed,
instead of y</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>ndarray, shape(len(<a href="#id7"><span class="problematic" id="id8">predictions_train_</span></a>), )</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="quantificationlib.decomposition.multiclass.OneVsRestQuantifier.verbose">
<span class="sig-name descname"><span class="pre">verbose</span></span><a class="headerlink" href="#quantificationlib.decomposition.multiclass.OneVsRestQuantifier.verbose" title="Permalink to this definition">¶</a></dt>
<dd><p>The verbosity level</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="quantificationlib.decomposition.multiclass.OneVsRestQuantifier.fit">
<span class="sig-name descname"><span class="pre">fit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">X</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">predictions_train</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/quantificationlib/decomposition/multiclass.html#OneVsRestQuantifier.fit"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#quantificationlib.decomposition.multiclass.OneVsRestQuantifier.fit" title="Permalink to this definition">¶</a></dt>
<dd><p>Fits all the quanfifiers of a OneVsRest decomposition</p>
<p>First, the method fits the estimators (estimator_train and estimator_test) (if needed) using
the <cite>fit</cite> method of its superclass</p>
<p>Then, it creates (using <cite>deepcopy</cite>) the set on <a href="#id9"><span class="problematic" id="id10">quantifiers_</span></a>, one per class, and fit them</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>X</strong> (<em>array-like</em><em>, </em><em>shape</em><em> (</em><em>n_examples</em><em>, </em><em>n_features</em><em>)</em>) – Data</p></li>
<li><p><strong>y</strong> (<em>array-like</em><em>, </em><em>shape</em><em> (</em><em>n_examples</em><em>, </em><em>)</em>) – True classes</p></li>
<li><p><strong>predictions_train</strong> (<em>ndarray</em><em>, </em><em>optional</em><em>, </em><em>shape</em><em> (</em><em>n_examples</em><em>, </em><em>n_classes</em><em>) </em><em>(</em><em>probs</em><em>)</em>) – Predictions of the examples in the training set</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError</strong> – When estimator_train or estimator_test are not instances of OneVsRestClassifier</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="quantificationlib.decomposition.multiclass.OneVsRestQuantifier.predict">
<span class="sig-name descname"><span class="pre">predict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">X</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">predictions_test</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/quantificationlib/decomposition/multiclass.html#OneVsRestQuantifier.predict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#quantificationlib.decomposition.multiclass.OneVsRestQuantifier.predict" title="Permalink to this definition">¶</a></dt>
<dd><p>Aggregates the prevalences of the <a href="#id11"><span class="problematic" id="id12">quantifiers_</span></a> to compute the final prediction</p>
<p>Just one aggregation strategy is implemented. It normalizes the prevalences given by each quantifier
to sum 1</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>X</strong> (<em>(</em><em>sparse</em><em>) </em><em>array-like</em><em>, </em><em>shape</em><em> (</em><em>n_examples</em><em>, </em><em>n_features</em><em>)</em>) – Data</p></li>
<li><p><strong>predictions_test</strong> (<em>ndarray</em><em>, </em><em>shape</em><em> (</em><em>n_examples</em><em>, </em><em>n_classes</em><em>) </em><em>(</em><em>default=None</em><em>)</em>) – Predictions for the testing bag</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">





<h3><a href="../index.html">Table of Contents</a></h3>
<ul>
<li><a class="reference internal" href="#">quantificationlib.decomposition.multiclass module</a><ul>
<li><a class="reference internal" href="#quantificationlib.decomposition.multiclass.OneVsRestQuantifier"><code class="docutils literal notranslate"><span class="pre">OneVsRestQuantifier</span></code></a><ul>
<li><a class="reference internal" href="#quantificationlib.decomposition.multiclass.OneVsRestQuantifier.base_quantifier"><code class="docutils literal notranslate"><span class="pre">base_quantifier</span></code></a></li>
<li><a class="reference internal" href="#quantificationlib.decomposition.multiclass.OneVsRestQuantifier.estimator_train"><code class="docutils literal notranslate"><span class="pre">estimator_train</span></code></a></li>
<li><a class="reference internal" href="#quantificationlib.decomposition.multiclass.OneVsRestQuantifier.estimator_test"><code class="docutils literal notranslate"><span class="pre">estimator_test</span></code></a></li>
<li><a class="reference internal" href="#quantificationlib.decomposition.multiclass.OneVsRestQuantifier.needs_predictions_train"><code class="docutils literal notranslate"><span class="pre">needs_predictions_train</span></code></a></li>
<li><a class="reference internal" href="#quantificationlib.decomposition.multiclass.OneVsRestQuantifier.probabilistic_predictions"><code class="docutils literal notranslate"><span class="pre">probabilistic_predictions</span></code></a></li>
<li><a class="reference internal" href="#quantificationlib.decomposition.multiclass.OneVsRestQuantifier.predictions_train_"><code class="docutils literal notranslate"><span class="pre">predictions_train_</span></code></a></li>
<li><a class="reference internal" href="#quantificationlib.decomposition.multiclass.OneVsRestQuantifier.predictions_test_"><code class="docutils literal notranslate"><span class="pre">predictions_test_</span></code></a></li>
<li><a class="reference internal" href="#quantificationlib.decomposition.multiclass.OneVsRestQuantifier.quantifiers_"><code class="docutils literal notranslate"><span class="pre">quantifiers_</span></code></a></li>
<li><a class="reference internal" href="#quantificationlib.decomposition.multiclass.OneVsRestQuantifier.classes_"><code class="docutils literal notranslate"><span class="pre">classes_</span></code></a></li>
<li><a class="reference internal" href="#quantificationlib.decomposition.multiclass.OneVsRestQuantifier.y_ext_"><code class="docutils literal notranslate"><span class="pre">y_ext_</span></code></a></li>
<li><a class="reference internal" href="#quantificationlib.decomposition.multiclass.OneVsRestQuantifier.verbose"><code class="docutils literal notranslate"><span class="pre">verbose</span></code></a></li>
<li><a class="reference internal" href="#quantificationlib.decomposition.multiclass.OneVsRestQuantifier.fit"><code class="docutils literal notranslate"><span class="pre">fit()</span></code></a></li>
<li><a class="reference internal" href="#quantificationlib.decomposition.multiclass.OneVsRestQuantifier.predict"><code class="docutils literal notranslate"><span class="pre">predict()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>



<h3> Source Code </h3>
<a href="https://github.com/AICGijon/quantificationlib">GitHub Repository</a>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="quantificationlib.decomposition.html"
                          title="previous chapter">quantificationlib.decomposition package</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="quantificationlib.decomposition.ordinal.html"
                          title="next chapter">quantificationlib.decomposition.ordinal module</a></p>
  </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="quantificationlib.decomposition.ordinal.html" title="quantificationlib.decomposition.ordinal module"
             >next</a> |</li>
        <li class="right" >
          <a href="quantificationlib.decomposition.html" title="quantificationlib.decomposition package"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">quantificationlib 0.1.1 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="quantificationlib.decomposition.html" >quantificationlib.decomposition package</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">quantificationlib.decomposition.multiclass module</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2023, AIC Gijón.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 6.2.1.
    </div>
  </body>
</html>